add_executable(test_dynamic test.c)
add_executable(test_static test.c)
add_executable(test_mpi_static test_mpi.c)
include_directories(${CMAKE_SOURCE_DIR}/libemulatebbapi)
target_link_libraries(test_dynamic emulate_bbapi_dynamic)
target_link_libraries(test_static iointercept emulate_bbapi)
target_link_libraries(test_mpi_static iointercept emulate_bbapi)
set_target_properties(test_dynamic PROPERTIES LINK_FLAGS "-dynamic -ldl")
set_target_properties(test_mpi_static PROPERTIES LINK_FLAGS "-Wl,--wrap,close")
set_target_properties(test_static PROPERTIES LINK_FLAGS "-Wl,--wrap,close")
